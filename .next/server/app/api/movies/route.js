"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/movies/route";
exports.ids = ["app/api/movies/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmovies%2Froute&page=%2Fapi%2Fmovies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmovies%2Froute.ts&appDir=D%3A%5Ckursovayasiteq%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Ckursovayasiteq&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmovies%2Froute&page=%2Fapi%2Fmovies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmovies%2Froute.ts&appDir=D%3A%5Ckursovayasiteq%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Ckursovayasiteq&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_kursovayasiteq_src_app_api_movies_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/movies/route.ts */ \"(rsc)/./src/app/api/movies/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/movies/route\",\n        pathname: \"/api/movies\",\n        filename: \"route\",\n        bundlePath: \"app/api/movies/route\"\n    },\n    resolvedPagePath: \"D:\\\\kursovayasiteq\\\\src\\\\app\\\\api\\\\movies\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_kursovayasiteq_src_app_api_movies_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/movies/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtb3ZpZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1vdmllcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1vdmllcyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDa3Vyc292YXlhc2l0ZXElNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNrdXJzb3ZheWFzaXRlcSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRztBQUNoRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2t1cnNvdmF5YXNpdGVxLz8zYzRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXGt1cnNvdmF5YXNpdGVxXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG1vdmllc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbW92aWVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbW92aWVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tb3ZpZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJEOlxcXFxrdXJzb3ZheWFzaXRlcVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtb3ZpZXNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL21vdmllcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmovies%2Froute&page=%2Fapi%2Fmovies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmovies%2Froute.ts&appDir=D%3A%5Ckursovayasiteq%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Ckursovayasiteq&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/[...nextauth]/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/auth/[...nextauth]/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler),\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./src/models/User.ts\");\n\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    throw new Error(\"Please enter your email and password\");\n                }\n                await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n                try {\n                    // Find user and explicitly select password field\n                    const user = await _models_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n                        email: credentials.email.toLowerCase()\n                    }).select(\"+password\");\n                    if (!user) {\n                        throw new Error(\"No user found with this email\");\n                    }\n                    const isValid = await user.comparePassword(credentials.password);\n                    if (!isValid) {\n                        throw new Error(\"Invalid password\");\n                    }\n                    // Return user data without sensitive information\n                    return {\n                        id: user._id.toString(),\n                        email: user.email,\n                        username: user.username,\n                        role: user.role,\n                        name: user.username // Required by NextAuth\n                    };\n                } catch (error) {\n                    console.error(\"Authentication error:\", error);\n                    throw new Error(\"Authentication failed\");\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n                token.username = user.username;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n                session.user.username = token.username;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/signin\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\nconst handler = next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDWTtBQUNqQztBQUNBO0FBRXpCLE1BQU1JLGNBQStCO0lBQzFDQyxXQUFXO1FBQ1RKLDJFQUFtQkEsQ0FBQztZQUNsQkssTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUFFQyxPQUFPO29CQUFTQyxNQUFNO2dCQUFRO2dCQUN2Q0MsVUFBVTtvQkFBRUYsT0FBTztvQkFBWUMsTUFBTTtnQkFBVztZQUNsRDtZQUNBLE1BQU1FLFdBQVVMLFdBQVc7Z0JBQ3pCLElBQUksQ0FBQ0EsYUFBYUMsU0FBUyxDQUFDRCxhQUFhSSxVQUFVO29CQUNqRCxNQUFNLElBQUlFLE1BQU07Z0JBQ2xCO2dCQUVBLE1BQU1YLG1EQUFTQTtnQkFFZixJQUFJO29CQUNGLGlEQUFpRDtvQkFDakQsTUFBTVksT0FBTyxNQUFNWCxvREFBSUEsQ0FBQ1ksT0FBTyxDQUFDO3dCQUM5QlAsT0FBT0QsWUFBWUMsS0FBSyxDQUFDUSxXQUFXO29CQUN0QyxHQUFHQyxNQUFNLENBQUM7b0JBRVYsSUFBSSxDQUFDSCxNQUFNO3dCQUNULE1BQU0sSUFBSUQsTUFBTTtvQkFDbEI7b0JBRUEsTUFBTUssVUFBVSxNQUFNSixLQUFLSyxlQUFlLENBQUNaLFlBQVlJLFFBQVE7b0JBRS9ELElBQUksQ0FBQ08sU0FBUzt3QkFDWixNQUFNLElBQUlMLE1BQU07b0JBQ2xCO29CQUVBLGlEQUFpRDtvQkFDakQsT0FBTzt3QkFDTE8sSUFBSU4sS0FBS08sR0FBRyxDQUFDQyxRQUFRO3dCQUNyQmQsT0FBT00sS0FBS04sS0FBSzt3QkFDakJlLFVBQVVULEtBQUtTLFFBQVE7d0JBQ3ZCQyxNQUFNVixLQUFLVSxJQUFJO3dCQUNmbEIsTUFBTVEsS0FBS1MsUUFBUSxDQUFDLHVCQUF1QjtvQkFDN0M7Z0JBQ0YsRUFBRSxPQUFPRSxPQUFPO29CQUNkQyxRQUFRRCxLQUFLLENBQUMseUJBQXlCQTtvQkFDdkMsTUFBTSxJQUFJWixNQUFNO2dCQUNsQjtZQUNGO1FBQ0Y7S0FDRDtJQUNEYyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVmLElBQUksRUFBRTtZQUN2QixJQUFJQSxNQUFNO2dCQUNSZSxNQUFNVCxFQUFFLEdBQUdOLEtBQUtNLEVBQUU7Z0JBQ2xCUyxNQUFNTCxJQUFJLEdBQUdWLEtBQUtVLElBQUk7Z0JBQ3RCSyxNQUFNTixRQUFRLEdBQUdULEtBQUtTLFFBQVE7WUFDaEM7WUFDQSxPQUFPTTtRQUNUO1FBQ0EsTUFBTUMsU0FBUSxFQUFFQSxPQUFPLEVBQUVELEtBQUssRUFBRTtZQUM5QixJQUFJQyxRQUFRaEIsSUFBSSxFQUFFO2dCQUNoQmdCLFFBQVFoQixJQUFJLENBQUNNLEVBQUUsR0FBR1MsTUFBTVQsRUFBRTtnQkFDMUJVLFFBQVFoQixJQUFJLENBQUNVLElBQUksR0FBR0ssTUFBTUwsSUFBSTtnQkFDOUJNLFFBQVFoQixJQUFJLENBQUNTLFFBQVEsR0FBR00sTUFBTU4sUUFBUTtZQUN4QztZQUNBLE9BQU9PO1FBQ1Q7SUFDRjtJQUNBQyxPQUFPO1FBQ0xDLFFBQVE7UUFDUlAsT0FBTztJQUNUO0lBQ0FLLFNBQVM7UUFDUEcsVUFBVTtRQUNWQyxRQUFRLEtBQUssS0FBSyxLQUFLO0lBQ3pCO0lBQ0FDLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtBQUNyQyxFQUFDO0FBRUQsTUFBTUMsVUFBVXZDLGdEQUFRQSxDQUFDSTtBQUNpQiIsInNvdXJjZXMiOlsid2VicGFjazovL2t1cnNvdmF5YXNpdGVxLy4vc3JjL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLnRzPzAwOTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoLCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnXG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL2RiJ1xuaW1wb3J0IFVzZXIgZnJvbSAnQC9tb2RlbHMvVXNlcidcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ0NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy5lbWFpbCB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZW50ZXIgeW91ciBlbWFpbCBhbmQgcGFzc3dvcmQnKVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgZGJDb25uZWN0KClcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEZpbmQgdXNlciBhbmQgZXhwbGljaXRseSBzZWxlY3QgcGFzc3dvcmQgZmllbGRcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgXG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwudG9Mb3dlckNhc2UoKSBcbiAgICAgICAgICB9KS5zZWxlY3QoJytwYXNzd29yZCcpXG5cbiAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBmb3VuZCB3aXRoIHRoaXMgZW1haWwnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB1c2VyLmNvbXBhcmVQYXNzd29yZChjcmVkZW50aWFscy5wYXNzd29yZClcblxuICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhc3N3b3JkJylcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZXR1cm4gdXNlciBkYXRhIHdpdGhvdXQgc2Vuc2l0aXZlIGluZm9ybWF0aW9uXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB1c2VyLl9pZC50b1N0cmluZygpLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICAgIG5hbWU6IHVzZXIudXNlcm5hbWUgLy8gUmVxdWlyZWQgYnkgTmV4dEF1dGhcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3IpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdXRoZW50aWNhdGlvbiBmYWlsZWQnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkXG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGVcbiAgICAgICAgdG9rZW4udXNlcm5hbWUgPSB1c2VyLnVzZXJuYW1lXG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW5cbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAoc2Vzc2lvbi51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nXG4gICAgICAgIHNlc3Npb24udXNlci51c2VybmFtZSA9IHRva2VuLnVzZXJuYW1lIGFzIHN0cmluZ1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb25cbiAgICB9XG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgICBlcnJvcjogJy9hdXRoL3NpZ25pbidcbiAgfSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiAnand0JyxcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVUXG59XG5cbmNvbnN0IGhhbmRsZXIgPSBOZXh0QXV0aChhdXRoT3B0aW9ucylcbmV4cG9ydCB7IGhhbmRsZXIgYXMgR0VULCBoYW5kbGVyIGFzIFBPU1QgfVxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsImRiQ29ubmVjdCIsIlVzZXIiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJFcnJvciIsInVzZXIiLCJmaW5kT25lIiwidG9Mb3dlckNhc2UiLCJzZWxlY3QiLCJpc1ZhbGlkIiwiY29tcGFyZVBhc3N3b3JkIiwiaWQiLCJfaWQiLCJ0b1N0cmluZyIsInVzZXJuYW1lIiwicm9sZSIsImVycm9yIiwiY29uc29sZSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwic2Vzc2lvbiIsInBhZ2VzIiwic2lnbkluIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwiaGFuZGxlciIsIkdFVCIsIlBPU1QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/[...nextauth]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/movies/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/movies/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/api/auth/[...nextauth]/route */ \"(rsc)/./src/app/api/auth/[...nextauth]/route.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _models_Movie__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/models/Movie */ \"(rsc)/./src/models/Movie.ts\");\n\n\n\n\n\nasync function GET(request) {\n    try {\n        console.log(\"Attempting database connection...\");\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        console.log(\"Database connected successfully\");\n        const { searchParams } = new URL(request.url);\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = 24 // Fixed limit of 24 items per page\n        ;\n        const sort = searchParams.get(\"sort\") || \"-createdAt\";\n        const search = searchParams.get(\"search\");\n        const status = searchParams.get(\"status\");\n        const type = searchParams.get(\"type\");\n        const link = searchParams.get(\"link\");\n        const sortField = searchParams.get(\"sortField\") || \"createdAt\";\n        const sortDirection = searchParams.get(\"sortDirection\") || \"desc\";\n        const skip = (page - 1) * limit;\n        // Build query\n        let query = {};\n        // Add search filter\n        if (search) {\n            query.$or = [\n                {\n                    title: {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    description: {\n                        $regex: search,\n                        $options: \"i\"\n                    }\n                }\n            ];\n        }\n        // Add status filter\n        if (status) {\n            query.status = status;\n        }\n        // Add type filter\n        if (type) {\n            query.type = type;\n        }\n        // Add link filter\n        if (link) {\n            if (link === \"available\") {\n                query.link = {\n                    $exists: true,\n                    $ne: \"\"\n                };\n            } else if (link === \"unavailable\") {\n                query.$or = [\n                    {\n                        link: {\n                            $exists: false\n                        }\n                    },\n                    {\n                        link: \"\"\n                    }\n                ];\n            }\n        }\n        console.log(\"Query:\", query);\n        // Build sort object\n        let sortObject = {};\n        switch(sortField){\n            case \"date\":\n                sortObject.releaseDate = sortDirection === \"asc\" ? 1 : -1;\n                // Secondary sort by createdAt for items without releaseDate\n                sortObject.createdAt = sortDirection === \"asc\" ? 1 : -1;\n                break;\n            case \"rating\":\n                // Sort nulls last regardless of direction\n                sortObject = {\n                    $sort: {\n                        rating: {\n                            $cond: {\n                                if: {\n                                    $eq: [\n                                        \"$rating\",\n                                        null\n                                    ]\n                                },\n                                then: sortDirection === \"asc\" ? Number.MAX_VALUE : Number.MIN_VALUE,\n                                else: \"$rating\"\n                            }\n                        }\n                    }\n                };\n                break;\n            case \"chatRating\":\n                // Sort nulls last regardless of direction\n                sortObject = {\n                    $sort: {\n                        chatRating: {\n                            $cond: {\n                                if: {\n                                    $eq: [\n                                        \"$chatRating\",\n                                        null\n                                    ]\n                                },\n                                then: sortDirection === \"asc\" ? Number.MAX_VALUE : Number.MIN_VALUE,\n                                else: \"$chatRating\"\n                            }\n                        }\n                    }\n                };\n                break;\n            default:\n                sortObject[sortField] = sortDirection === \"asc\" ? 1 : -1;\n        }\n        // Get total count with filters\n        const total = await _models_Movie__WEBPACK_IMPORTED_MODULE_4__[\"default\"].countDocuments(query);\n        // Build aggregation pipeline for proper sorting with nulls\n        const pipeline = [\n            {\n                $match: query\n            },\n            ...sortField === \"rating\" || sortField === \"chatRating\" ? [\n                {\n                    $addFields: {\n                        sortValue: {\n                            $cond: {\n                                if: {\n                                    $eq: [\n                                        `$${sortField}`,\n                                        null\n                                    ]\n                                },\n                                then: sortDirection === \"asc\" ? Number.MAX_VALUE : Number.MIN_VALUE,\n                                else: `$${sortField}`\n                            }\n                        }\n                    }\n                },\n                {\n                    $sort: {\n                        sortValue: sortDirection === \"asc\" ? 1 : -1\n                    }\n                }\n            ] : [\n                {\n                    $sort: sortObject\n                }\n            ],\n            {\n                $skip: skip\n            },\n            {\n                $limit: limit\n            }\n        ];\n        // Execute aggregation pipeline\n        const movies = await _models_Movie__WEBPACK_IMPORTED_MODULE_4__[\"default\"].aggregate(pipeline);\n        console.log(`Found ${movies.length} movies out of ${total} total`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            movies,\n            pagination: {\n                total,\n                page,\n                totalPages: Math.ceil(total / limit),\n                hasMore: skip + movies.length < total\n            }\n        });\n    } catch (error) {\n        console.error(\"Error in GET /api/movies:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error name:\", error.name);\n            console.error(\"Error message:\", error.message);\n            if (\"code\" in error) {\n                console.error(\"Error code:\", error.code);\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal Server Error\",\n            message: error instanceof Error ? error.message : \"Unknown error occurred\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        if (session.user.role !== \"admin\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Forbidden\"\n            }, {\n                status: 403\n            });\n        }\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        const body = await request.json();\n        console.log(\"Received movie data:\", body);\n        const movie = await _models_Movie__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create(body);\n        console.log(\"Movie created successfully:\", movie._id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            movie\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error in POST /api/movies:\", error);\n        if (error instanceof Error && error.name === \"ValidationError\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Validation Error\",\n                message: error.message,\n                details: error\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal Server Error\",\n            message: error instanceof Error ? error.message : \"Unknown error occurred\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3VFLE1BQU0sQ0FBQ0Y7UUFDakNsRSxRQUFRQyxHQUFHLENBQUMsK0JBQStCa0UsTUFBTUUsR0FBRztRQUVwRCxPQUFPNUUscURBQVlBLENBQUN5RCxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVGdCO1FBQ0YsR0FBRztZQUFFeEQsUUFBUTtRQUFJO0lBQ25CLEVBQUUsT0FBTzhDLE9BQU87UUFDZHpELFFBQVF5RCxLQUFLLENBQUMsOEJBQThCQTtRQUU1QyxJQUFJQSxpQkFBaUJDLFNBQVNELE1BQU1FLElBQUksS0FBSyxtQkFBbUI7WUFDOUQsT0FBT2xFLHFEQUFZQSxDQUFDeUQsSUFBSSxDQUN0QjtnQkFDRUMsU0FBUztnQkFDVE0sT0FBTztnQkFDUEcsU0FBU0gsTUFBTUcsT0FBTztnQkFDdEJVLFNBQVNiO1lBQ1gsR0FDQTtnQkFBRTlDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU9sQixxREFBWUEsQ0FBQ3lELElBQUksQ0FDdEI7WUFDRUMsU0FBUztZQUNUTSxPQUFPO1lBQ1BHLFNBQVNILGlCQUFpQkMsUUFBUUQsTUFBTUcsT0FBTyxHQUFHO1FBQ3BELEdBQ0E7WUFBRWpELFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va3Vyc292YXlhc2l0ZXEvLi9zcmMvYXBwL2FwaS9tb3ZpZXMvcm91dGUudHM/MWUyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgnXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvYXBwL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGUnXG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL2RiJ1xuaW1wb3J0IE1vdmllIGZyb20gJ0AvbW9kZWxzL01vdmllJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyBkYXRhYmFzZSBjb25uZWN0aW9uLi4uJylcbiAgICBhd2FpdCBkYkNvbm5lY3QoKVxuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5JylcbiAgICBcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgncGFnZScpIHx8ICcxJylcbiAgICBjb25zdCBsaW1pdCA9IDI0IC8vIEZpeGVkIGxpbWl0IG9mIDI0IGl0ZW1zIHBlciBwYWdlXG4gICAgY29uc3Qgc29ydCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3NvcnQnKSB8fCAnLWNyZWF0ZWRBdCdcbiAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZWFyY2gnKVxuICAgIGNvbnN0IHN0YXR1cyA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXR1cycpXG4gICAgY29uc3QgdHlwZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3R5cGUnKVxuICAgIGNvbnN0IGxpbmsgPSBzZWFyY2hQYXJhbXMuZ2V0KCdsaW5rJylcbiAgICBjb25zdCBzb3J0RmllbGQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzb3J0RmllbGQnKSB8fCAnY3JlYXRlZEF0J1xuICAgIGNvbnN0IHNvcnREaXJlY3Rpb24gPSBzZWFyY2hQYXJhbXMuZ2V0KCdzb3J0RGlyZWN0aW9uJykgfHwgJ2Rlc2MnXG4gICAgXG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdFxuXG4gICAgLy8gQnVpbGQgcXVlcnlcbiAgICBsZXQgcXVlcnk6IGFueSA9IHt9XG4gICAgXG4gICAgLy8gQWRkIHNlYXJjaCBmaWx0ZXJcbiAgICBpZiAoc2VhcmNoKSB7XG4gICAgICBxdWVyeS4kb3IgPSBbXG4gICAgICAgIHsgdGl0bGU6IHsgJHJlZ2V4OiBzZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgICB7IGRlc2NyaXB0aW9uOiB7ICRyZWdleDogc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfVxuICAgICAgXVxuICAgIH1cblxuICAgIC8vIEFkZCBzdGF0dXMgZmlsdGVyXG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgcXVlcnkuc3RhdHVzID0gc3RhdHVzXG4gICAgfVxuXG4gICAgLy8gQWRkIHR5cGUgZmlsdGVyXG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIHF1ZXJ5LnR5cGUgPSB0eXBlXG4gICAgfVxuXG4gICAgLy8gQWRkIGxpbmsgZmlsdGVyXG4gICAgaWYgKGxpbmspIHtcbiAgICAgIGlmIChsaW5rID09PSAnYXZhaWxhYmxlJykge1xuICAgICAgICBxdWVyeS5saW5rID0geyAkZXhpc3RzOiB0cnVlLCAkbmU6ICcnIH1cbiAgICAgIH0gZWxzZSBpZiAobGluayA9PT0gJ3VuYXZhaWxhYmxlJykge1xuICAgICAgICBxdWVyeS4kb3IgPSBbXG4gICAgICAgICAgeyBsaW5rOiB7ICRleGlzdHM6IGZhbHNlIH0gfSxcbiAgICAgICAgICB7IGxpbms6ICcnIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdRdWVyeTonLCBxdWVyeSlcbiAgICBcbiAgICAvLyBCdWlsZCBzb3J0IG9iamVjdFxuICAgIGxldCBzb3J0T2JqZWN0OiBhbnkgPSB7fVxuICAgIHN3aXRjaCAoc29ydEZpZWxkKSB7XG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgc29ydE9iamVjdC5yZWxlYXNlRGF0ZSA9IHNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gMSA6IC0xXG4gICAgICAgIC8vIFNlY29uZGFyeSBzb3J0IGJ5IGNyZWF0ZWRBdCBmb3IgaXRlbXMgd2l0aG91dCByZWxlYXNlRGF0ZVxuICAgICAgICBzb3J0T2JqZWN0LmNyZWF0ZWRBdCA9IHNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gMSA6IC0xXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyYXRpbmcnOlxuICAgICAgICAvLyBTb3J0IG51bGxzIGxhc3QgcmVnYXJkbGVzcyBvZiBkaXJlY3Rpb25cbiAgICAgICAgc29ydE9iamVjdCA9IHtcbiAgICAgICAgICAkc29ydDoge1xuICAgICAgICAgICAgcmF0aW5nOiB7XG4gICAgICAgICAgICAgICRjb25kOiB7XG4gICAgICAgICAgICAgICAgaWY6IHsgJGVxOiBbJyRyYXRpbmcnLCBudWxsXSB9LFxuICAgICAgICAgICAgICAgIHRoZW46IHNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gTnVtYmVyLk1BWF9WQUxVRSA6IE51bWJlci5NSU5fVkFMVUUsXG4gICAgICAgICAgICAgICAgZWxzZTogJyRyYXRpbmcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXRSYXRpbmcnOiAgLy8gQ2hhbmdlZCBmcm9tICdjaGF0JyB0byAnY2hhdFJhdGluZydcbiAgICAgICAgLy8gU29ydCBudWxscyBsYXN0IHJlZ2FyZGxlc3Mgb2YgZGlyZWN0aW9uXG4gICAgICAgIHNvcnRPYmplY3QgPSB7XG4gICAgICAgICAgJHNvcnQ6IHtcbiAgICAgICAgICAgIGNoYXRSYXRpbmc6IHtcbiAgICAgICAgICAgICAgJGNvbmQ6IHtcbiAgICAgICAgICAgICAgICBpZjogeyAkZXE6IFsnJGNoYXRSYXRpbmcnLCBudWxsXSB9LFxuICAgICAgICAgICAgICAgIHRoZW46IHNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gTnVtYmVyLk1BWF9WQUxVRSA6IE51bWJlci5NSU5fVkFMVUUsXG4gICAgICAgICAgICAgICAgZWxzZTogJyRjaGF0UmF0aW5nJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzb3J0T2JqZWN0W3NvcnRGaWVsZF0gPSBzb3J0RGlyZWN0aW9uID09PSAnYXNjJyA/IDEgOiAtMVxuICAgIH1cblxuICAgIC8vIEdldCB0b3RhbCBjb3VudCB3aXRoIGZpbHRlcnNcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IE1vdmllLmNvdW50RG9jdW1lbnRzKHF1ZXJ5KVxuXG4gICAgLy8gQnVpbGQgYWdncmVnYXRpb24gcGlwZWxpbmUgZm9yIHByb3BlciBzb3J0aW5nIHdpdGggbnVsbHNcbiAgICBjb25zdCBwaXBlbGluZSA9IFtcbiAgICAgIHsgJG1hdGNoOiBxdWVyeSB9LFxuICAgICAgLi4uKHNvcnRGaWVsZCA9PT0gJ3JhdGluZycgfHwgc29ydEZpZWxkID09PSAnY2hhdFJhdGluZycgPyBbXG4gICAgICAgIHtcbiAgICAgICAgICAkYWRkRmllbGRzOiB7XG4gICAgICAgICAgICBzb3J0VmFsdWU6IHtcbiAgICAgICAgICAgICAgJGNvbmQ6IHtcbiAgICAgICAgICAgICAgICBpZjogeyAkZXE6IFtgJCR7c29ydEZpZWxkfWAsIG51bGxdIH0sXG4gICAgICAgICAgICAgICAgdGhlbjogc29ydERpcmVjdGlvbiA9PT0gJ2FzYycgPyBOdW1iZXIuTUFYX1ZBTFVFIDogTnVtYmVyLk1JTl9WQUxVRSxcbiAgICAgICAgICAgICAgICBlbHNlOiBgJCR7c29ydEZpZWxkfWBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyAkc29ydDogeyBzb3J0VmFsdWU6IHNvcnREaXJlY3Rpb24gPT09ICdhc2MnID8gMSA6IC0xIH0gfVxuICAgICAgXSA6IFtcbiAgICAgICAgeyAkc29ydDogc29ydE9iamVjdCB9XG4gICAgICBdKSxcbiAgICAgIHsgJHNraXA6IHNraXAgfSxcbiAgICAgIHsgJGxpbWl0OiBsaW1pdCB9XG4gICAgXVxuXG4gICAgLy8gRXhlY3V0ZSBhZ2dyZWdhdGlvbiBwaXBlbGluZVxuICAgIGNvbnN0IG1vdmllcyA9IGF3YWl0IE1vdmllLmFnZ3JlZ2F0ZShwaXBlbGluZSlcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgRm91bmQgJHttb3ZpZXMubGVuZ3RofSBtb3ZpZXMgb3V0IG9mICR7dG90YWx9IHRvdGFsYClcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1vdmllcyxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcbiAgICAgICAgaGFzTW9yZTogc2tpcCArIG1vdmllcy5sZW5ndGggPCB0b3RhbFxuICAgICAgfVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gR0VUIC9hcGkvbW92aWVzOicsIGVycm9yKVxuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBuYW1lOicsIGVycm9yLm5hbWUpXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtZXNzYWdlOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICBpZiAoJ2NvZGUnIGluIGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvZGU6JywgKGVycm9yIGFzIGFueSkuY29kZSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHNlc3Npb24udXNlci5yb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRm9yYmlkZGVuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgIClcbiAgICB9IFxuXG4gICAgYXdhaXQgZGJDb25uZWN0KClcbiAgICBcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgbW92aWUgZGF0YTonLCBib2R5KVxuICAgIFxuICAgIGNvbnN0IG1vdmllID0gYXdhaXQgTW92aWUuY3JlYXRlKGJvZHkpXG4gICAgY29uc29sZS5sb2coJ01vdmllIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIG1vdmllLl9pZClcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1vdmllXG4gICAgfSwgeyBzdGF0dXM6IDIwMSB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIFBPU1QgL2FwaS9tb3ZpZXM6JywgZXJyb3IpXG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gRXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3JcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiZGJDb25uZWN0IiwiTW92aWUiLCJHRVQiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInBhZ2UiLCJwYXJzZUludCIsImdldCIsImxpbWl0Iiwic29ydCIsInNlYXJjaCIsInN0YXR1cyIsInR5cGUiLCJsaW5rIiwic29ydEZpZWxkIiwic29ydERpcmVjdGlvbiIsInNraXAiLCJxdWVyeSIsIiRvciIsInRpdGxlIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJkZXNjcmlwdGlvbiIsIiRleGlzdHMiLCIkbmUiLCJzb3J0T2JqZWN0IiwicmVsZWFzZURhdGUiLCJjcmVhdGVkQXQiLCIkc29ydCIsInJhdGluZyIsIiRjb25kIiwiaWYiLCIkZXEiLCJ0aGVuIiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwiTUlOX1ZBTFVFIiwiZWxzZSIsImNoYXRSYXRpbmciLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwicGlwZWxpbmUiLCIkbWF0Y2giLCIkYWRkRmllbGRzIiwic29ydFZhbHVlIiwiJHNraXAiLCIkbGltaXQiLCJtb3ZpZXMiLCJhZ2dyZWdhdGUiLCJsZW5ndGgiLCJqc29uIiwic3VjY2VzcyIsInBhZ2luYXRpb24iLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJoYXNNb3JlIiwiZXJyb3IiLCJFcnJvciIsIm5hbWUiLCJtZXNzYWdlIiwiY29kZSIsIlBPU1QiLCJzZXNzaW9uIiwidXNlciIsInJvbGUiLCJib2R5IiwibW92aWUiLCJjcmVhdGUiLCJfaWQiLCJkZXRhaWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/movies/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dbConnect: () => (/* binding */ dbConnect),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet isConnected = false;\nasync function dbConnect() {\n    if (isConnected) {\n        console.log(\"Using existing database connection\");\n        return;\n    }\n    try {\n        const opts = {\n            bufferCommands: false\n        };\n        console.log(\"Connecting to MongoDB...\");\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts);\n        isConnected = true;\n        console.log(\"Connected to MongoDB successfully\");\n    } catch (error) {\n        console.error(\"Error connecting to MongoDB:\", error);\n        // More detailed error information\n        if (error instanceof Error) {\n            console.error(\"Error name:\", error.name);\n            console.error(\"Error message:\", error.message);\n            if (\"code\" in error) {\n                console.error(\"Error code:\", error.code);\n            }\n        }\n        isConnected = false;\n        throw new Error(\"Unable to connect to MongoDB. Please check your connection string and ensure MongoDB is running.\");\n    }\n}\n// Handle connection errors\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"error\", (err)=>{\n    console.error(\"MongoDB connection error:\", err);\n    isConnected = false;\n});\n// Handle disconnection\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"disconnected\", ()=>{\n    console.warn(\"MongoDB disconnected\");\n    isConnected = false;\n});\n// Handle process termination\nprocess.on(\"SIGINT\", async ()=>{\n    if (isConnected) {\n        try {\n            await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.close();\n            console.log(\"MongoDB connection closed through app termination\");\n            process.exit(0);\n        } catch (err) {\n            console.error(\"Error closing MongoDB connection:\", err);\n            process.exit(1);\n        }\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQ1I7QUFFSjtBQUVBLElBQUlDLGNBQWM7QUFFWCxlQUFlQztJQUNwQixJQUFJRCxhQUFhO1FBQ2ZFLFFBQVFDLEdBQUcsQ0FBQztRQUNaO0lBQ0Y7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsT0FBTztZQUNYQyxnQkFBZ0I7UUFDbEI7UUFFQUgsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTVIsdURBQWdCLENBQUNDLGFBQWNRO1FBRXJDSixjQUFjO1FBQ2RFLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0ksT0FBTztRQUNkTCxRQUFRSyxLQUFLLENBQUMsZ0NBQWdDQTtRQUU5QyxrQ0FBa0M7UUFDbEMsSUFBSUEsaUJBQWlCUixPQUFPO1lBQzFCRyxRQUFRSyxLQUFLLENBQUMsZUFBZUEsTUFBTUMsSUFBSTtZQUN2Q04sUUFBUUssS0FBSyxDQUFDLGtCQUFrQkEsTUFBTUUsT0FBTztZQUM3QyxJQUFJLFVBQVVGLE9BQU87Z0JBQ25CTCxRQUFRSyxLQUFLLENBQUMsZUFBZSxNQUFlRyxJQUFJO1lBQ2xEO1FBQ0Y7UUFFQVYsY0FBYztRQUNkLE1BQU0sSUFBSUQsTUFBTTtJQUNsQjtBQUNGO0FBRUEsMkJBQTJCO0FBQzNCSiwwREFBbUIsQ0FBQ2lCLEVBQUUsQ0FBQyxTQUFTLENBQUNDO0lBQy9CWCxRQUFRSyxLQUFLLENBQUMsNkJBQTZCTTtJQUMzQ2IsY0FBYztBQUNoQjtBQUVBLHVCQUF1QjtBQUN2QkwsMERBQW1CLENBQUNpQixFQUFFLENBQUMsZ0JBQWdCO0lBQ3JDVixRQUFRWSxJQUFJLENBQUM7SUFDYmQsY0FBYztBQUNoQjtBQUVBLDZCQUE2QjtBQUM3QkgsUUFBUWUsRUFBRSxDQUFDLFVBQVU7SUFDbkIsSUFBSVosYUFBYTtRQUNmLElBQUk7WUFDRixNQUFNTCwwREFBbUIsQ0FBQ29CLEtBQUs7WUFDL0JiLFFBQVFDLEdBQUcsQ0FBQztZQUNaTixRQUFRbUIsSUFBSSxDQUFDO1FBQ2YsRUFBRSxPQUFPSCxLQUFLO1lBQ1pYLFFBQVFLLEtBQUssQ0FBQyxxQ0FBcUNNO1lBQ25EaEIsUUFBUW1CLElBQUksQ0FBQztRQUNmO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlZixTQUFTQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va3Vyc292YXlhc2l0ZXEvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJ1xuICApO1xufVxuXG5sZXQgaXNDb25uZWN0ZWQgPSBmYWxzZTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRiQ29ubmVjdCgpIHtcbiAgaWYgKGlzQ29ubmVjdGVkKSB7XG4gICAgY29uc29sZS5sb2coJ1VzaW5nIGV4aXN0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24nKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICBidWZmZXJDb21tYW5kczogZmFsc2UsXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW5nIHRvIE1vbmdvREIuLi4nKTtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJISwgb3B0cyk7XG5cbiAgICBpc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nb0RCIHN1Y2Nlc3NmdWxseScpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbm5lY3RpbmcgdG8gTW9uZ29EQjonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gTW9yZSBkZXRhaWxlZCBlcnJvciBpbmZvcm1hdGlvblxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBuYW1lOicsIGVycm9yLm5hbWUpO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWVzc2FnZTonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIGlmICgnY29kZScgaW4gZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY29kZTonLCAoZXJyb3IgYXMgYW55KS5jb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBjb25uZWN0IHRvIE1vbmdvREIuIFBsZWFzZSBjaGVjayB5b3VyIGNvbm5lY3Rpb24gc3RyaW5nIGFuZCBlbnN1cmUgTW9uZ29EQiBpcyBydW5uaW5nLicpO1xuICB9XG59XG5cbi8vIEhhbmRsZSBjb25uZWN0aW9uIGVycm9yc1xubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlcnIpO1xuICBpc0Nvbm5lY3RlZCA9IGZhbHNlO1xufSk7XG5cbi8vIEhhbmRsZSBkaXNjb25uZWN0aW9uXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gIGNvbnNvbGUud2FybignTW9uZ29EQiBkaXNjb25uZWN0ZWQnKTtcbiAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbn0pO1xuXG4vLyBIYW5kbGUgcHJvY2VzcyB0ZXJtaW5hdGlvblxucHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGlvbiBjbG9zZWQgdGhyb3VnaCBhcHAgdGVybWluYXRpb24nKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsb3NpbmcgTW9uZ29EQiBjb25uZWN0aW9uOicsIGVycik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZGJDb25uZWN0O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJpc0Nvbm5lY3RlZCIsImRiQ29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJjb25uZWN0IiwiZXJyb3IiLCJuYW1lIiwibWVzc2FnZSIsImNvZGUiLCJjb25uZWN0aW9uIiwib24iLCJlcnIiLCJ3YXJuIiwiY2xvc2UiLCJleGl0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/Movie.ts":
/*!*****************************!*\
  !*** ./src/models/Movie.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MovieSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    title: {\n        type: String,\n        required: true\n    },\n    description: {\n        type: String,\n        required: false\n    },\n    releaseDate: {\n        type: Date,\n        required: false\n    },\n    genre: {\n        type: String,\n        required: false\n    },\n    rating: {\n        type: Number,\n        required: false,\n        min: 0,\n        max: 10\n    },\n    chatRating: {\n        type: Number,\n        required: false,\n        min: 0,\n        max: 10\n    },\n    posterUrl: {\n        type: String,\n        required: true\n    },\n    status: {\n        type: String,\n        required: true,\n        enum: [\n            \"Dropped\",\n            \"Watching\",\n            \"Planned\",\n            \"Viewed\"\n        ]\n    },\n    type: {\n        type: String,\n        required: true,\n        enum: [\n            \"Movie\",\n            \"Series\",\n            \"Documentary\",\n            \"Anime\",\n            \"Cartoon\"\n        ]\n    },\n    link: {\n        type: String,\n        required: false\n    }\n}, {\n    timestamps: true\n});\nconst Movie = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Movie || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Movie\", MovieSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Movie);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL01vdmllLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQWtCOUMsTUFBTUMsY0FBYyxJQUFJRCx3REFBZSxDQUFTO0lBQzlDRyxPQUFPO1FBQ0xDLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBQyxhQUFhO1FBQ1hILE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBRSxhQUFhO1FBQ1hKLE1BQU1LO1FBQ05ILFVBQVU7SUFDWjtJQUNBSSxPQUFPO1FBQ0xOLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBSyxRQUFRO1FBQ05QLE1BQU1RO1FBQ05OLFVBQVU7UUFDVk8sS0FBSztRQUNMQyxLQUFLO0lBQ1A7SUFDQUMsWUFBWTtRQUNWWCxNQUFNUTtRQUNOTixVQUFVO1FBQ1ZPLEtBQUs7UUFDTEMsS0FBSztJQUNQO0lBQ0FFLFdBQVc7UUFDVFosTUFBTUM7UUFDTkMsVUFBVTtJQUNaO0lBQ0FXLFFBQVE7UUFDTmIsTUFBTUM7UUFDTkMsVUFBVTtRQUNWWSxNQUFNO1lBQUM7WUFBVztZQUFZO1lBQVc7U0FBUztJQUNwRDtJQUNBZCxNQUFNO1FBQ0pBLE1BQU1DO1FBQ05DLFVBQVU7UUFDVlksTUFBTTtZQUFDO1lBQVM7WUFBVTtZQUFlO1lBQVM7U0FBVTtJQUM5RDtJQUNBQyxNQUFNO1FBQ0pmLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtBQUNGLEdBQUc7SUFDRGMsWUFBWTtBQUNkO0FBRUEsTUFBTUMsUUFBUXJCLHdEQUFlLENBQUNxQixLQUFLLElBQUlyQixxREFBYyxDQUFTLFNBQVNDO0FBRXZFLGlFQUFlb0IsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2t1cnNvdmF5YXNpdGVxLy4vc3JjL21vZGVscy9Nb3ZpZS50cz9kMWNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJztcblxuZXhwb3J0IGludGVyZmFjZSBJTW92aWUgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIF9pZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQ7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICByZWxlYXNlRGF0ZT86IERhdGU7XG4gIGdlbnJlPzogc3RyaW5nO1xuICByYXRpbmc/OiBudW1iZXI7XG4gIGNoYXRSYXRpbmc/OiBudW1iZXI7XG4gIHBvc3RlclVybDogc3RyaW5nO1xuICBzdGF0dXM6ICdEcm9wcGVkJyB8ICdXYXRjaGluZycgfCAnUGxhbm5lZCcgfCAnVmlld2VkJztcbiAgdHlwZTogJ01vdmllJyB8ICdTZXJpZXMnIHwgJ0RvY3VtZW50YXJ5JyB8ICdBbmltZScgfCAnQ2FydG9vbic7XG4gIGxpbms/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG5jb25zdCBNb3ZpZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWE8SU1vdmllPih7XG4gIHRpdGxlOiB7IFxuICAgIHR5cGU6IFN0cmluZywgXG4gICAgcmVxdWlyZWQ6IHRydWUgXG4gIH0sXG4gIGRlc2NyaXB0aW9uOiB7IFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogZmFsc2VcbiAgfSxcbiAgcmVsZWFzZURhdGU6IHsgXG4gICAgdHlwZTogRGF0ZSwgXG4gICAgcmVxdWlyZWQ6IGZhbHNlXG4gIH0sXG4gIGdlbnJlOiB7IFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogZmFsc2VcbiAgfSxcbiAgcmF0aW5nOiB7IFxuICAgIHR5cGU6IE51bWJlciwgXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIG1pbjogMCxcbiAgICBtYXg6IDEwIFxuICB9LFxuICBjaGF0UmF0aW5nOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICBtaW46IDAsXG4gICAgbWF4OiAxMFxuICB9LFxuICBwb3N0ZXJVcmw6IHsgXG4gICAgdHlwZTogU3RyaW5nLCBcbiAgICByZXF1aXJlZDogdHJ1ZSBcbiAgfSxcbiAgc3RhdHVzOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIGVudW06IFsnRHJvcHBlZCcsICdXYXRjaGluZycsICdQbGFubmVkJywgJ1ZpZXdlZCddXG4gIH0sXG4gIHR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgZW51bTogWydNb3ZpZScsICdTZXJpZXMnLCAnRG9jdW1lbnRhcnknLCAnQW5pbWUnLCAnQ2FydG9vbiddXG4gIH0sXG4gIGxpbms6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IGZhbHNlXG4gIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbmNvbnN0IE1vdmllID0gbW9uZ29vc2UubW9kZWxzLk1vdmllIHx8IG1vbmdvb3NlLm1vZGVsPElNb3ZpZT4oJ01vdmllJywgTW92aWVTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBNb3ZpZTsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNb3ZpZVNjaGVtYSIsIlNjaGVtYSIsInRpdGxlIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZGVzY3JpcHRpb24iLCJyZWxlYXNlRGF0ZSIsIkRhdGUiLCJnZW5yZSIsInJhdGluZyIsIk51bWJlciIsIm1pbiIsIm1heCIsImNoYXRSYXRpbmciLCJwb3N0ZXJVcmwiLCJzdGF0dXMiLCJlbnVtIiwibGluayIsInRpbWVzdGFtcHMiLCJNb3ZpZSIsIm1vZGVscyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Movie.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/User.ts":
/*!****************************!*\
  !*** ./src/models/User.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst UserSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    username: {\n        type: String,\n        required: [\n            true,\n            \"Please provide a username\"\n        ],\n        unique: true,\n        trim: true,\n        minlength: [\n            3,\n            \"Username must be at least 3 characters long\"\n        ]\n    },\n    email: {\n        type: String,\n        required: [\n            true,\n            \"Please provide an email\"\n        ],\n        unique: true,\n        trim: true,\n        lowercase: true,\n        match: [\n            /^\\S+@\\S+\\.\\S+$/,\n            \"Please provide a valid email\"\n        ]\n    },\n    password: {\n        type: String,\n        required: [\n            true,\n            \"Please provide a password\"\n        ],\n        minlength: [\n            6,\n            \"Password must be at least 6 characters long\"\n        ],\n        select: false\n    },\n    role: {\n        type: String,\n        enum: [\n            \"user\",\n            \"admin\"\n        ],\n        default: \"user\"\n    }\n}, {\n    timestamps: true\n});\n// Hash password before saving\nUserSchema.pre(\"save\", async function(next) {\n    if (!this.isModified(\"password\")) {\n        return next();\n    }\n    try {\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(this.password, salt);\n        next();\n    } catch (error) {\n        next(error);\n    }\n});\nUserSchema.methods.comparePassword = async function(candidatePassword) {\n    try {\n        return await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(candidatePassword, this.password);\n    } catch (error) {\n        throw error;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", UserSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1VzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEM7QUFDaEI7QUFZOUIsTUFBTUUsYUFBYSxJQUFJRix3REFBZSxDQUFRO0lBQzVDSSxVQUFVO1FBQ1JDLE1BQU1DO1FBQ05DLFVBQVU7WUFBQztZQUFNO1NBQTRCO1FBQzdDQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsV0FBVztZQUFDO1lBQUc7U0FBOEM7SUFDL0Q7SUFDQUMsT0FBTztRQUNMTixNQUFNQztRQUNOQyxVQUFVO1lBQUM7WUFBTTtTQUEwQjtRQUMzQ0MsUUFBUTtRQUNSQyxNQUFNO1FBQ05HLFdBQVc7UUFDWEMsT0FBTztZQUFDO1lBQWtCO1NBQStCO0lBQzNEO0lBQ0FDLFVBQVU7UUFDUlQsTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBNEI7UUFDN0NHLFdBQVc7WUFBQztZQUFHO1NBQThDO1FBQzdESyxRQUFRO0lBQ1Y7SUFDQUMsTUFBTTtRQUNKWCxNQUFNQztRQUNOVyxNQUFNO1lBQUM7WUFBUTtTQUFRO1FBQ3ZCQyxTQUFTO0lBQ1g7QUFDRixHQUFHO0lBQ0RDLFlBQVk7QUFDZDtBQUVBLDhCQUE4QjtBQUM5QmpCLFdBQVdrQixHQUFHLENBQUMsUUFBUSxlQUFlQyxJQUFJO0lBQ3hDLElBQUksQ0FBQyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxhQUFhO1FBQ2hDLE9BQU9EO0lBQ1Q7SUFFQSxJQUFJO1FBQ0YsTUFBTUUsT0FBTyxNQUFNdEIsdURBQWMsQ0FBQztRQUNsQyxJQUFJLENBQUNhLFFBQVEsR0FBRyxNQUFNYixvREFBVyxDQUFDLElBQUksQ0FBQ2EsUUFBUSxFQUFFUztRQUNqREY7SUFDRixFQUFFLE9BQU9LLE9BQU87UUFDZEwsS0FBS0s7SUFDUDtBQUNGO0FBRUF4QixXQUFXeUIsT0FBTyxDQUFDQyxlQUFlLEdBQUcsZUFBZUMsaUJBQXlCO0lBQzNFLElBQUk7UUFDRixPQUFPLE1BQU01Qix1REFBYyxDQUFDNEIsbUJBQW1CLElBQUksQ0FBQ2YsUUFBUTtJQUM5RCxFQUFFLE9BQU9ZLE9BQU87UUFDZCxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSxpRUFBZTFCLHdEQUFlLENBQUNnQyxJQUFJLElBQUloQyxxREFBYyxDQUFRLFFBQVFFLFdBQVdBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rdXJzb3ZheWFzaXRlcS8uL3NyYy9tb2RlbHMvVXNlci50cz8wOTZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyIGV4dGVuZHMgRG9jdW1lbnQge1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICByb2xlOiAndXNlcicgfCAnYWRtaW4nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbiAgY29tcGFyZVBhc3N3b3JkKGNhbmRpZGF0ZVBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+O1xufVxuXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYTxJVXNlcj4oe1xuICB1c2VybmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgcHJvdmlkZSBhIHVzZXJuYW1lJ10sXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIHRyaW06IHRydWUsXG4gICAgbWlubGVuZ3RoOiBbMywgJ1VzZXJuYW1lIG11c3QgYmUgYXQgbGVhc3QgMyBjaGFyYWN0ZXJzIGxvbmcnXVxuICB9LFxuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgcHJvdmlkZSBhbiBlbWFpbCddLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcbiAgICBtYXRjaDogWy9eXFxTK0BcXFMrXFwuXFxTKyQvLCAnUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBlbWFpbCddXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBwcm92aWRlIGEgcGFzc3dvcmQnXSxcbiAgICBtaW5sZW5ndGg6IFs2LCAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZyddLFxuICAgIHNlbGVjdDogZmFsc2UgXG4gIH0sXG4gIHJvbGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWyd1c2VyJywgJ2FkbWluJ10sXG4gICAgZGVmYXVsdDogJ3VzZXInXG4gIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIEhhc2ggcGFzc3dvcmQgYmVmb3JlIHNhdmluZ1xuVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbihuZXh0KSB7XG4gIGlmICghdGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSB7XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcbiAgICB0aGlzLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgc2FsdCk7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIG5leHQoZXJyb3IgYXMgRXJyb3IpO1xuICB9XG59KTtcblxuVXNlclNjaGVtYS5tZXRob2RzLmNvbXBhcmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uKGNhbmRpZGF0ZVBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY2FuZGlkYXRlUGFzc3dvcmQsIHRoaXMucGFzc3dvcmQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuVXNlciB8fCBtb25nb29zZS5tb2RlbDxJVXNlcj4oJ1VzZXInLCBVc2VyU2NoZW1hKTtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImJjcnlwdCIsIlVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInRyaW0iLCJtaW5sZW5ndGgiLCJlbWFpbCIsImxvd2VyY2FzZSIsIm1hdGNoIiwicGFzc3dvcmQiLCJzZWxlY3QiLCJyb2xlIiwiZW51bSIsImRlZmF1bHQiLCJ0aW1lc3RhbXBzIiwicHJlIiwibmV4dCIsImlzTW9kaWZpZWQiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2giLCJlcnJvciIsIm1ldGhvZHMiLCJjb21wYXJlUGFzc3dvcmQiLCJjYW5kaWRhdGVQYXNzd29yZCIsImNvbXBhcmUiLCJtb2RlbHMiLCJVc2VyIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/User.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmovies%2Froute&page=%2Fapi%2Fmovies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmovies%2Froute.ts&appDir=D%3A%5Ckursovayasiteq%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Ckursovayasiteq&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();